# システムアーキテクチャ設計書

本ドキュメント群は、Skill Quest AIプロジェクトのシステムアーキテクチャを詳細に記述したものです。

## 📚 ドキュメント構成

1. [アーキテクチャ概要](./01_アーキテクチャ概要.md)
   - ハイレベル・アーキテクチャ図
   - データフローの設計

2. [モノレポ構成](./02_モノレポ構成.md)
   - ディレクトリ構造
   - 型共有のメカニズム

3. [バックエンド設計](./03_バックエンド設計.md)
   - Hono on Workers
   - ミドルウェアとバリデーション

4. [データベース設計](./04_データベース設計.md)
   - Cloudflare D1 + Drizzle ORM
   - スキーマ設計とマイグレーション

5. [認証設計](./05_認証設計.md)
   - Better Auth統合
   - セッション管理とセキュリティ

6. [AI設計](./06_AI設計.md)
   - Workers AI
   - モデル選定とFunction Calling

7. [フロントエンド設計](./07_フロントエンド設計.md)
   - React + TanStack Query
   - AIチャットUIと認証UI

8. [インフラとセキュリティ](./08_インフラとセキュリティ.md)
   - 環境分離とデプロイメント
   - CI/CDパイプライン
   - セキュリティ対策

9. [運用とコスト](./09_運用とコスト.md)
   - コスト見積もり
   - 運用監視

10. [画面遷移図](./10_画面遷移図.md)

11. [テスト戦略](./11_テスト戦略.md)
   - テストピラミッドとCIで実行するチェック
   - モノレポ各パッケージのテスト方針
   - 統合・E2Eの扱い（GitHub Actions実装の前提）

12. [デプロイ戦略](./12_デプロイ戦略.md)
   - 環境定義とデプロイトリガー
   - マイグレーション適用タイミングとデプロイ順序
   - ロールバック方針（GitHub Actions実装の前提）

## 🎯 アーキテクチャの特徴

本システムは、**Cloudflare Workers + D1 + Workers AI** を中核とした、エッジファーストの分散型アーキテクチャです。

### 主要な技術スタック

- **フロントエンド**: React + Vite + TailwindCSS
- **バックエンド**: Hono (Cloudflare Workers)
- **データベース**: Cloudflare D1 (SQLite) + Drizzle ORM
- **AI**: Cloudflare Workers AI (Llama 3.1/3.3)
- **認証**: Better Auth
- **モノレポ**: pnpm workspaces + Turborepo

### アーキテクチャの利点

1. **低レイテンシ**: エッジネットワークでの実行により、グローバルに高速なレスポンス
2. **型安全性**: Hono RPCによるエンドツーエンドの型共有
3. **低コスト**: 月額$15-40で1,000人規模のユーザーをサポート
4. **開発者体験**: モノレポによる一元管理と、型推論による開発効率の向上

